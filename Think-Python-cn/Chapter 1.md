# 第一章
## 编程思想

本书期望能指导你做到像计算机专家一样思考。这意味着你要整合数学，工程和自然科学的知识去综合思考。比如数学，计算机专家用专业语言去表达观点(尤其关于计算)。比如工程师，他们设计原件，组装组件，构建系统，权衡各种方案。比如科学家，他们观察复杂系统行为，小心假设，积极求证。

计算机专家最重要的能力是解决问题。解决问题意味着可以分析问题，提出创造性解决方案，并能清晰准确表述。事实证明，学习编程是锻炼解决问题能力的极好机会。这也是本章叫做**编程思想**的缘由。

首先，我们学习如何编程，如何使用这个有用技能，再进一步，我们学习如何使用编程达到目标。随着我们不断前进，前景将越来越明朗。

### 1.1 Python语言

你将学习的编程语言叫*Python*. *Python*是一个类似于C, C++, Perl 和 Java的高级语言。

也有一些底层语言，例如机器语言或者汇编语言(以下统称机器语言)。宽泛来说，计算机只能运行机器语言。高级语言在运行前需要进行编译，而此编译过程比较耗时，这也是高级语言的一个劣势。

但是优点相对更多，首先，高级语言短小精悍，易于理解，更加适合人类编写，同时更不容易出错。再者，高级语言**易于迁移**，这意味着其不需修改或者仅仅稍微修改便可以在不同电脑上运行。机器语言只能在特定的一种机器上运行，如果想在其他机器运行，你需要重写。

```
源码 -> 解释器 -> 输出
```
**图1.1：** 解释器以中断方式切换执行读取和计算(每次执行一部分代码)。

```
源码 -> 编译器 -> 机器码 -> 执行器 -> 输出
```
**图1.2：**编译器将源码转成机器码，运行并输出。

基于以上优点，几乎所有的程序都会采用高级语言。一些特定应用才会采用机器语言。

高级语言转机器语言有两种方式：解释器和编译器。解释器直接读取并执行程序，所写即所得。即解释器会逐段读取并运行，流程见**图1.1**。

编译器需要先编译，后执行。此处，高级语言代码称为源码，编译后的程序，称为机器码或者执行码。只需编译一次，便可重复执行。编译流程见**图1.2**。

**Python**因为其被解释器解释执行，而被称为解释型语言。使用解释器有两种模式：交互模式和脚本模式。交互模式下，输入Python代码，解释器输出结果。

```python
>>> 1+1
2
```

箭头标识(>>>)意味着解释器准备好了，当你输入 `1+1`， 解释器输出 `2`。

另外，你可以将代码保存为文件，通过解释器去运行文件内容。此文件一般称作**脚本**。一般约定Python脚本文件均以 `.py` 为后缀。

执行脚本，需要告诉解释器脚本文件的名称。假如，想在一个UNIX的命令窗口中运行文件名为 `dinsdale.py`的脚本，一般输入 `python dinsdale.py`。不过不同开发环境下，脚本运行方式多有不同。关于Python运行环境的详细描述，可以参考 `https://python.org`。

交互模式因为可以即刻响应，所以便于测试一些小的代码片段。但如果代码量多，你最好保存为代码脚本，以便下次修改和执行。

### 1.2 什么是程序？
程序就是一系列如何运算的指令。运算可以是数学计算，例如解方程组，求多项式的根，也可以是内容处理，比如查找替换文档中的文字，(听起来有点奇怪)或者编译代码。

不同编程语言的细节多有不同，但是基本指令都类似：
- **输入**：从键盘，文件或其他设备中获取数据。
- **输出**： 将数据在屏幕展示，或者保存文件，发送给其他设备。
- **数学计算**：基本数学运算，例如加减乘除。
- **条件判断**：根据条件，选择执行。
- **循环**：重复执行，一般每次有些许变化。

不管你相信与否，就这么多指令。你曾经用过的每种编程语言，无论如何编译，基本都是这些指令构成的。所以你可以认为编码的过程，就是将一个个庞大复杂的模块，不断拆解成一个一个的足够小的功能，小到可以用上面的指令去运行。

虽然有点形而上，但是在**算法章节**我们会回头来思考这个问题。

### 1.3 什么是调试？

写代码是很容易出错的。由于历史原因，编码中的错误叫做异常(**bugs**)，而追踪异常的过程叫做调试(**debugging**).

程序异常一般包括： 语法错误，运行时异常，语义错误等。如此区分这些异常是为了能快速定位错误。

#### 1.3.1 语法错误
只有语法正确，Python程序才能运行。否则解释器会报错。语法泛指程序结构以及结构规定。例如小括号要成对出现，`(1+1)`合法，但是`8)`就是语法错误。

英文语境中，大部分语法错误不会影响你的理解，所以卡明斯的诗歌不会抛错。但是Python并不宽容，程序中任意一处语法错误，都会导致程序运行异常，并且抛错。一般你编程生涯的开始几周，大部分时间是追踪解决语法错误。随着经验增加，编码中的错误越来越少，定位也越来越快。

#### 1.3.2 运行时错误
第二种错误类型是运行时错误。也就是说只有程序开始运行后，才会报错。这些错误一般也称作**异常**，因为这些错误表示异常(或者坏的)问题发生了。

运行时异常在开始几章的简单代码里面很少见到，所以稍后章节才会涉及。

#### 1.3.3 语义错误
第三种类型是语义错误，如果程序存在语义错误，一般执行到结束也不会抛错，但是结果并不是我们想要的。也就是说得到的不是想要的。

问题在于你写的程序不是你想实现功能而应该写的。意味着程序(或语义)错误。通过监控程序的输出以及程序的执行过程，可以发现语义错误。

#### 1.3.4 如何调试
编码中最重要的一项技能就是调试。虽然调试过程比较枯燥，但是调试是编程中最需要才智，最具有挑战和趣味的部分。

某些时候，调试类似于侦探，你需要利用线索去分析导致此结果的各种流程和事件。

调试也像实验科学，一旦你猜测可能会出现问题，你就需要调整代码，并重新尝试。如果假设正确，你就能估计修改的结果，你也就离可执行程序更近了一些。如果假设不正确，你就要重新来过。就像*Sherlock Holmes*指出的，`排除一切不可能的，剩下的即使再不可能，那也是真相。`(柯南道尔的**符号四**)

对于某些人，编程和调试是同样的事情，因为编程就是逐步调试程序，直到程序正确运行。关键在于，从一段小程序开始，稍微修改，然后在编码过程中不断调试优化，这样你能保证程序时刻可用。

比如，Linux操作系统包含了成千上万行代码，但是它起始于*Linus Torvalds*研究Intel 80386芯片的一个小程序。
